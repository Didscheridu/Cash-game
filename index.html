<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Imperium: God Mode</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg-dark: #0a0a0a;
            --bg-panel: #161616;
            --accent: #FFD700;
            --green: #00ff88;
            --red: #ff3333;
            --blue: #00ccff;
            --purple: #d500f9;
        }
        body {
            font-family: 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-dark);
            color: white;
            margin: 0;
            padding: 0;
            user-select: none;
            overflow: hidden; 
        }

        /* --- ANIMATIONEN --- */
        @keyframes popIn { 0% { transform: scale(0); opacity: 0; } 80% { transform: scale(1.1); } 100% { transform: scale(1); opacity: 1; } }
        @keyframes flashBorder { 0% { border-color: #333; } 50% { border-color: var(--accent); } 100% { border-color: #333; } }
        @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* --- UI STRUKTUR --- */
        .game-view { display: none; height: 100vh; box-sizing: border-box; padding: 20px; max-width: 1200px; margin: 0 auto; overflow-y: auto; }
        .top-bar { display: flex; justify-content: space-between; align-items: center; background: #222; padding: 15px 25px; border-radius: 12px; margin-bottom: 20px; position: sticky; top: 0; z-index: 100; border-bottom: 2px solid #333; }
        .back-btn { background: #444; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; }
        
        button { cursor: pointer; transition: 0.2s; border: none; }
        button:active { transform: scale(0.95); }
        input { background: #222; border: 1px solid #444; color: white; border-radius: 5px; text-align: center; padding: 8px; }

        /* --- AKTIEN LAYOUT --- */
        .stock-layout { display: grid; grid-template-columns: 400px 1fr; gap: 20px; height: 85vh; }
        .stock-list-container { overflow-y: auto; background: var(--bg-panel); border-radius: 12px; border: 1px solid #333; }
        table { width: 100%; border-collapse: collapse; }
        th { position: sticky; top: 0; background: #222; padding: 10px; text-align: left; color: #888; z-index: 2; }
        td { padding: 12px 10px; border-bottom: 1px solid #222; cursor: pointer; }
        tr:hover { background: #333; }
        
        /* MANIPULATION PANEL */
        .manipulation-panel {
            margin-top: 20px; padding: 15px; background: #1a1111; border: 1px solid #442222; border-radius: 10px;
        }
        .hacker-title { color: var(--red); font-family: monospace; letter-spacing: 2px; margin-bottom: 10px; font-weight: bold; display: flex; justify-content: space-between; }
        .manip-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; align-items: end;}
        .btn-hack { background: var(--red); color: white; font-weight: bold; padding: 10px; border-radius: 5px; width: 100%; }
        .btn-hack:disabled { background: #444; cursor: not-allowed; opacity: 0.5; }

        /* TRADE CONTROLS */
        .trade-controls { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .btn-action { padding: 15px; font-weight: bold; border-radius: 5px; color: black; font-size: 1em; }
        .btn-bot { background: #333; color: #888; border: 1px solid #555; grid-column: span 2; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .bot-active { background: var(--purple); color: white; border-color: var(--purple); box-shadow: 0 0 10px rgba(213, 0, 249, 0.4); }

        /* BOT LOG */
        #botLogContainer { position: fixed; top: 80px; right: 20px; width: 250px; pointer-events: none; z-index: 9999; display: flex; flex-direction: column; gap: 5px; }
        .bot-msg { background: rgba(0,0,0,0.8); color: var(--green); padding: 8px; border-radius: 5px; font-size: 0.8em; border-left: 3px solid var(--green); animation: slideInRight 0.3s; }

        /* --- INVENTAR & LOOT --- */
        .chest-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 40px; }
        .chest-card { background: #222; padding: 20px; border-radius: 15px; border: 2px solid #444; cursor: pointer; text-align: center; }
        .chest-card:hover { border-color: var(--purple); background: #2a2a2a; }
        
        .inventory-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; margin-top: 20px; }
        .inv-item { background: #1a1a1a; padding: 15px; border-radius: 10px; border: 1px solid #333; text-align: center; animation: popIn 0.3s; cursor: pointer; transition: 0.2s; }
        .inv-item:hover { transform: translateY(-5px); border-color: white; }
        .rarity-legend { border-bottom: 3px solid var(--accent); background: linear-gradient(to bottom, #1a1a1a, #2a2a00); }

        /* POPUP */
        #lootPopup { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 999; }
        .loot-list { display: flex; gap: 20px; flex-wrap: wrap; justify-content: center; margin-top: 20px; }
        .loot-card-reveal { background: #333; padding: 20px; border-radius: 10px; text-align: center; animation: popIn 0.5s; width: 150px; border: 2px solid white; }

        /* --- TYCOON --- */
        .tycoon-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; }
        .building-card { background: var(--bg-panel); padding: 15px; border-radius: 10px; border: 1px solid #333; }
        .progress-bar-bg { width: 100%; height: 10px; background: #333; border-radius: 5px; margin-top: 20px; overflow: hidden; }
        .progress-bar-fill { height: 100%; background: var(--green); width: 0%; transition: width 1s linear; }

        /* --- MENU --- */
        #mainMenu { display: flex; flex-direction: column; align-items: center; height: 100vh; padding-top: 50px; background: radial-gradient(circle, #1a1a1a 0%, #000000 100%); }
        .menu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; max-width: 800px; width: 100%; }
        .menu-card { background: #222; padding: 30px; border-radius: 20px; text-align: center; cursor: pointer; border: 1px solid #333; transition: 0.3s; }
        .menu-card:hover { transform: scale(1.05); border-color: var(--accent); }

    </style>
</head>
<body>

    <div id="botLogContainer"></div>

    <div id="mainMenu">
        <h1 style="color:var(--accent); font-size: 3em; margin-bottom: 10px;">BUSINESS IMPERIUM</h1>
        <h2 style="color:var(--green); margin-bottom: 50px;" id="menuCash">10.000 ‚Ç¨</h2>
        
        <div class="menu-grid">
            <div class="menu-card" onclick="openGame('stocks')">
                <div style="font-size: 4em;">üìà</div>
                <h2>Aktienhandel</h2>
                <p style="color:#888">Mit Markt-Manipulator</p>
            </div>
            <div class="menu-card" onclick="openGame('loot')">
                <div style="font-size: 4em;">üéí</div>
                <h2>Auktionen</h2>
                <p style="color:#888">Items & Inventar</p>
            </div>
            <div class="menu-card" onclick="openGame('tycoon')">
                <div style="font-size: 4em;">üèôÔ∏è</div>
                <h2>Immobilien</h2>
                <p style="color:#888">Passives Einkommen</p>
            </div>
            <div class="menu-card" onclick="openGame('casino')">
                <div style="font-size: 4em;">üé∞</div>
                <h2>Casino</h2>
                <p style="color:#888">Roulette</p>
            </div>
        </div>
    </div>

    <div id="view-stocks" class="game-view">
        <div class="top-bar"><button class="back-btn" onclick="goHome()">üè† Home</button><span class="global-cash"></span></div>
        
        <div class="stock-layout">
            <div class="stock-list-container">
                <table><thead><tr><th>Firma</th><th>Kurs</th><th>Besitz</th></tr></thead><tbody id="stockTableBody"></tbody></table>
            </div>
            <div style="background: var(--bg-panel); padding: 20px; border-radius: 12px; display: flex; flex-direction: column;">
                
                <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                    <div>
                        <h2 id="stockNameDisplay" style="margin:0">Aktie w√§hlen</h2>
                        <small style="color:#888">History & Live Trend</small>
                    </div>
                    <h2 id="stockPriceDisplay" style="margin:0">--</h2>
                </div>
                
                <div style="flex-grow:1; position:relative; min-height: 250px;"><canvas id="stockChartCanvas"></canvas></div>
                
                <div class="manipulation-panel">
                    <div class="hacker-title"><span>‚ö†Ô∏è MARKT-MANIPULATOR</span> <span style="font-size:0.8em">ROOT ACCESS: GRANTED</span></div>
                    <div class="manip-grid">
                        <div>
                            <label style="font-size:0.8em; color:#888;">Zielwert (‚Ç¨)</label>
                            <input type="number" id="hackTarget" placeholder="z.B. 10000" style="width:100%; color:var(--accent); font-weight:bold;">
                        </div>
                        <div>
                            <label style="font-size:0.8em; color:#888;">Zeit (Sek)</label>
                            <input type="number" id="hackTime" value="10" min="2" style="width:100%;">
                        </div>
                        <button class="btn-hack" onclick="startManipulation()">üöÄ START</button>
                    </div>
                    <div style="text-align:center; margin-top:5px; font-size:0.8em; color:#666;">Oder leer lassen f√ºr % Boost Eingabe</div>
                </div>

                <div style="margin-top: 15px;">
                    <input type="number" id="stockInput" value="1" min="1" style="width:100%; padding:10px; box-sizing:border-box;">
                    <div class="trade-controls">
                        <button id="btnAutoBot" class="btn-action btn-bot" onclick="toggleAutoBot()">
                            <span style="font-size:1.5em">ü§ñ</span> 
                            <span id="botStatusText">Smart Bot: AUS</span>
                        </button>

                        <button class="btn-action" style="background:var(--green)" onclick="tradeManual('buy')">Kaufen</button>
                        <button class="btn-action" style="background:var(--red); color:white" onclick="tradeManual('sell')">Verkaufen</button>
                        <button class="btn-action" style="background:#222; color:var(--green); border:1px solid var(--green)" onclick="buyMax()">MAX</button>
                        <button class="btn-action" style="background:#222; color:var(--red); border:1px solid var(--red)" onclick="sellAll()">ALLE</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="view-loot" class="game-view">
        <div class="top-bar"><button class="back-btn" onclick="goHome()">üè† Home</button><span class="global-cash"></span></div>
        <h2 style="color:var(--purple)">Auktionen</h2>
        <div class="chest-grid">
            <div class="chest-card" onclick="buyContainer(200)">
                <div style="font-size:3em">üì¶</div>
                <h3>200 ‚Ç¨</h3>
            </div>
            <div class="chest-card" onclick="buyContainer(1500)">
                <div style="font-size:3em">üöö</div>
                <h3>1.500 ‚Ç¨</h3>
            </div>
            <div class="chest-card" onclick="buyContainer(8000)">
                <div style="font-size:3em">üö¢</div>
                <h3>8.000 ‚Ç¨</h3>
            </div>
        </div>
        <h2 style="border-top:1px solid #333; padding-top:20px;">Inventar <span id="invCount" style="font-size:0.6em"></span></h2>
        <button onclick="sellAllLoot()" style="background:#333; color:white; padding:5px; border-radius:5px;">Alles verkaufen</button>
        <div id="inventoryList" class="inventory-grid"></div>
    </div>

    <div id="lootPopup">
        <h1 id="lootTitle" style="color:white; margin-bottom:20px;">√ñffne...</h1>
        <div id="lootContainer" class="loot-list"></div>
        <button onclick="closePopup()" style="margin-top:30px; padding:15px 40px; background:var(--green); border-radius:10px;">OK</button>
    </div>

    <div id="view-tycoon" class="game-view">
        <div class="top-bar"><button class="back-btn" onclick="goHome()">üè† Home</button><span class="global-cash"></span></div>
        <div style="text-align: center; margin-bottom: 30px;">
            <h2>Mietzahlung:</h2>
            <div class="progress-bar-bg"><div id="rentProgress" class="progress-bar-fill"></div></div>
            <p style="color:#888">Einkommen: <span id="tycoonIncome">0</span> ‚Ç¨ / Min</p>
        </div>
        <div id="buildingList" class="tycoon-grid"></div>
    </div>

    <div id="view-casino" class="game-view">
        <div class="top-bar"><button class="back-btn" onclick="goHome()">üè† Home</button><span class="global-cash"></span></div>
        <div style="text-align:center; margin-top:50px">
            <h1 style="font-size:5em">üé∞</h1>
            <input type="number" id="betAmount" placeholder="Einsatz" style="padding:10px; width:200px; text-align:center;">
            <br><br>
            <button class="btn-action" style="background:var(--red); color:white;" onclick="spinCasino()">Rot/Schwarz (50%)</button>
            <h2 id="casinoMsg" style="margin-top:20px;"></h2>
        </div>
    </div>

    <script>
        // --- CORE & GLOBALS ---
        let cash = 10000;
        let inventory = [];
        let rentTimer = 0;
        let autoBotActive = false;
        
        function formatMoney(n) { return n.toLocaleString('de-DE', {style:'currency', currency:'EUR'}); }
        function updateUI() {
            document.getElementById('menuCash').innerText = formatMoney(cash);
            document.querySelectorAll('.global-cash').forEach(e => e.innerText = "Konto: " + formatMoney(cash));
            renderInventory(); renderTycoon();
        }
        function goHome() { document.querySelectorAll('.game-view').forEach(e => e.style.display='none'); document.getElementById('mainMenu').style.display='flex'; }
        function openGame(id) { document.getElementById('mainMenu').style.display='none'; document.getElementById('view-'+id).style.display='block'; if(id==='stocks') setTimeout(()=>stockChart.resize(),100); }

        // --- AKTIEN SYSTEM ---
        let stocks = [], selectedStockId = 0, stockChart;
        const stockNames = ["TechSoft", "Banana Inc", "MicroHard", "GigaFactory", "SpaceY", "Omega", "BlueSky"];

        // Init Stocks
        stockNames.forEach((n, i) => stocks.push({
            id: i, name: n, 
            price: Math.random()*150+50, 
            history: Array(60).fill(0), // L√§ngere History f√ºr sch√∂nere Kurven
            owned: 0,
            manipulation: { active: false, start: 0, target: 0, duration: 0, tick: 0 }
        }));
        stocks.forEach(s => s.history.fill(s.price));

        const ctx = document.getElementById('stockChartCanvas').getContext('2d');
        stockChart = new Chart(ctx, {
            type: 'line',
            data: { labels: Array(60).fill(''), datasets: [{ data: [], borderColor: '#00ff88', tension: 0.3, pointRadius: 0, borderWidth: 2 }] },
            options: { responsive: true, maintainAspectRatio: false, plugins: {legend:false}, scales:{x:{display:false}, y:{grid:{color:'#333'}}} }
        });

        // MARKT LOOP (10x pro Sekunde f√ºr fl√ºssigere Manipulation)
        setInterval(() => {
            stocks.forEach(s => {
                
                // 1. MANIPULATION LOGIK (GOD MODE)
                if(s.manipulation.active) {
                    s.manipulation.tick++;
                    let progress = s.manipulation.tick / (s.manipulation.duration * 10); // *10 weil Loop 100ms ist
                    
                    if(progress >= 1) {
                        // Ziel erreicht
                        s.price = s.manipulation.target;
                        s.manipulation.active = false;
                        addBotLog(`üèÅ ${s.name} hat Ziel ${formatMoney(s.price)} erreicht!`);
                    } else {
                        // Realistische Kurve berechnen (Interpolation + Noise)
                        let linearPoint = s.manipulation.start + (s.manipulation.target - s.manipulation.start) * progress;
                        
                        // Noise wird kleiner, je n√§her wir dem Ziel kommen (damit wir treffen)
                        let noiseFactor = (1 - progress) * (s.price * 0.1); 
                        let noise = (Math.random() - 0.5) * noiseFactor * 2;
                        
                        // Manchmal einen Dip einbauen (bei 30% und 60% Fortschritt)
                        if((progress > 0.25 && progress < 0.35) || (progress > 0.6 && progress < 0.7)) {
                            noise -= s.price * 0.05; // Leichter Absturz zwischendurch
                        }

                        s.price = linearPoint + noise;
                    }
                } 
                // 2. NORMALER MARKT
                else {
                    let change = (Math.random() - 0.5) * 2;
                    s.price += change;
                    if(s.price < 1) s.price = 1;
                }

                s.history.shift(); s.history.push(s.price);
            });

            // CHART UPDATE (etwas seltener rendern, damit es nicht laggt)
            if(document.getElementById('view-stocks').style.display === 'block') {
                updateChartData();
            }

        }, 100); // 100ms Ticks

        // UI RENDER LOOP (1x pro Sekunde reicht f√ºr Tabelle & Bot)
        setInterval(() => {
            if(document.getElementById('view-stocks').style.display === 'block') {
                renderStocks();
            }
            if(autoBotActive) runAutoBot();
        }, 1000);

        // --- MANIPULATION FUNKTION ---
        function startManipulation() {
            let s = stocks[selectedStockId];
            if(s.manipulation.active) return alert("Manipulation l√§uft schon!");

            let targetInput = document.getElementById('hackTarget').value;
            let timeInput = parseFloat(document.getElementById('hackTime').value) || 10;
            
            let targetPrice = 0;

            if(targetInput) {
                // Fester Preis Modus
                targetPrice = parseFloat(targetInput);
            } else {
                // Prozent Modus (User hat nichts eingegeben -> Prompt)
                let percent = prompt("Kein Zielpreis. Um wie viel % boosten? (z.B. 100 f√ºr Verdopplung)");
                if(!percent) return;
                targetPrice = s.price * (1 + (parseFloat(percent)/100));
            }

            s.manipulation = {
                active: true,
                start: s.price,
                target: targetPrice,
                duration: timeInput,
                tick: 0
            };

            addBotLog(`üöÄ Boost gestartet: ${s.name} -> ${formatMoney(targetPrice)} in ${timeInput}s`);
            
            // Chart Farbe √§ndern auf Gold w√§hrend Boost
            stockChart.data.datasets[0].borderColor = '#FFD700';
        }

        // --- VERBESSERTER AUTO BOT ---
        function toggleAutoBot() {
            autoBotActive = !autoBotActive;
            let btn = document.getElementById('btnAutoBot');
            let txt = document.getElementById('botStatusText');
            if(autoBotActive) { btn.classList.add('bot-active'); txt.innerText = "Smart Bot: AN"; }
            else { btn.classList.remove('bot-active'); txt.innerText = "Smart Bot: AUS"; }
        }

        function runAutoBot() {
            let s = stocks[Math.floor(Math.random() * stocks.length)]; // Bot checkt zuf√§llige Aktie
            
            // Moving Average berechnen (Durchschnitt der History)
            let avg = s.history.reduce((a,b)=>a+b, 0) / s.history.length;
            
            // Logik: Kauf wenn Preis 5% unter Durchschnitt
            if(s.price < avg * 0.95 && cash > s.price) {
                cash -= s.price; s.owned++;
                addBotLog(`ü§ñ Kauf: ${s.name} bei ${s.price.toFixed(2)}‚Ç¨`);
                updateUI();
            }
            // Logik: Verkauf wenn Preis 5% √ºber Durchschnitt
            else if(s.price > avg * 1.05 && s.owned > 0) {
                cash += s.price; s.owned--;
                addBotLog(`ü§ñ Verkauf: ${s.name} (+Gewinn)`);
                updateUI();
            }
        }

        function addBotLog(msg) {
            let div = document.createElement('div');
            div.className = 'bot-msg';
            div.innerText = msg;
            document.getElementById('botLogContainer').appendChild(div);
            setTimeout(() => div.remove(), 4000);
        }

        // --- CHART & UI HELPER ---
        function renderStocks() {
            let html = "";
            stocks.forEach(s => {
                let bg = s.id === selectedStockId ? '#333' : '';
                let status = s.manipulation.active ? '<span style="color:gold">‚ö†Ô∏è BOOST</span>' : '';
                html += `<tr onclick="selectStock(${s.id})" style="background:${bg}"><td>${s.name} ${status}</td><td>${s.price.toFixed(2)}‚Ç¨</td><td>${s.owned}</td></tr>`;
            });
            document.getElementById('stockTableBody').innerHTML = html;
        }
        function selectStock(id) { selectedStockId = id; updateChartData(); }
        function updateChartData() {
            let s = stocks[selectedStockId];
            document.getElementById('stockNameDisplay').innerText = s.name;
            document.getElementById('stockPriceDisplay').innerText = s.price.toFixed(2) + " ‚Ç¨";
            stockChart.data.datasets[0].data = s.history;
            // Farbe zur√ºcksetzen wenn kein Boost
            if(!s.manipulation.active) stockChart.data.datasets[0].borderColor = '#00ff88';
            stockChart.update('none'); // 'none' f√ºr Performance ohne Animation
        }
        function getQty() { return parseInt(document.getElementById('stockInput').value) || 1; }
        function tradeManual(type) {
            let qty = getQty(); let s = stocks[selectedStockId];
            if(type==='buy' && cash>=s.price*qty) { cash-=s.price*qty; s.owned+=qty; }
            if(type==='sell' && s.owned>=qty) { cash+=s.price*qty; s.owned-=qty; }
            updateUI();
        }
        function buyMax() { let s=stocks[selectedStockId]; let m=Math.floor(cash/s.price); if(m>0){cash-=m*s.price; s.owned+=m; updateUI();} }
        function sellAll() { let s=stocks[selectedStockId]; if(s.owned>0){cash+=s.owned*s.price; s.owned=0; updateUI();} }

        // --- REST VOM SPIEL (LOOT, TYCOON, CASINO) ---
        const itemsDB = [
            {n:"Socke",v:5,r:"common",i:"üß¶"},{n:"Stein",v:2,r:"trash",i:"ü™®"},{n:"Toaster",v:30,r:"common",i:"üçû"},
            {n:"Laptop",v:800,r:"rare",i:"üíª"},{n:"Goldbarren",v:5000,r:"legend",i:"ü•á"},{n:"Diamant",v:20000,r:"legend",i:"üíé"}
        ];
        function buyContainer(cost) {
            if(cash<cost) return alert("Geld fehlt!"); cash-=cost; updateUI();
            let c = document.getElementById('lootContainer'); c.innerHTML="";
            document.getElementById('lootPopup').style.display="flex";
            let count = Math.random()>0.7 ? 0 : Math.floor(Math.random()*4)+1;
            
            setTimeout(()=>{
                if(count===0) document.getElementById('lootTitle').innerText = "LEER! üí®";
                else {
                    document.getElementById('lootTitle').innerText = count + " Items!";
                    for(let i=0; i<count; i++){
                        let item = itemsDB[Math.floor(Math.random()*itemsDB.length)];
                        inventory.push(item);
                        c.innerHTML += `<div class="loot-card-reveal"><h1>${item.i}</h1><p>${item.n}</p><p style="color:lime">${item.v}‚Ç¨</p></div>`;
                    }
                }
                updateUI();
            },800);
        }
        function closePopup(){document.getElementById('lootPopup').style.display="none";}
        function renderInventory(){
            let d = document.getElementById('inventoryList'); d.innerHTML="";
            inventory.forEach((it,i)=>d.innerHTML+=`<div class="inv-item" onclick="sellItem(${i})"><h1>${it.i}</h1><p>${it.n}</p><small style="color:lime">${it.v}‚Ç¨</small></div>`);
            document.getElementById('invCount').innerText=inventory.length;
        }
        function sellItem(i){cash+=inventory[i].v; inventory.splice(i,1); updateUI();}
        function sellAllLoot(){let t=0; inventory.forEach(i=>t+=i.v); cash+=t; inventory=[]; updateUI();}

        // Tycoon
        let builds=[{id:0,n:"Kiosk",c:200,i:50,num:0},{id:1,n:"Haus",c:2000,i:600,num:0},{id:2,n:"Hotel",c:50000,i:18000,num:0}];
        function renderTycoon(){
            let d=document.getElementById('buildingList'); d.innerHTML=""; let inc=0;
            builds.forEach(b=>{ inc+=b.num*b.i; d.innerHTML+=`<div class="building-card"><h3>${b.n} (${b.num})</h3><p style="color:lime">+${b.i}/min</p><button style="width:100%;padding:10px;background:var(--blue)" onclick="buyB(${b.id})">Kauf ${Math.floor(b.c*Math.pow(1.15,b.num))}‚Ç¨</button></div>`;});
            document.getElementById('tycoonIncome').innerText=inc;
        }
        function buyB(id){let b=builds[id]; let c=Math.floor(b.c*Math.pow(1.15,b.num)); if(cash>=c){cash-=c;b.num++;updateUI();}}
        setInterval(()=>{rentTimer++; document.getElementById('rentProgress').style.width=(rentTimer/60)*100+"%"; if(rentTimer>=60){rentTimer=0; let inc=0; builds.forEach(b=>inc+=b.num*b.i); if(inc>0){cash+=inc;updateUI();}}},1000);

        // Casino
        function spinCasino(){let b=parseInt(document.getElementById('betAmount').value); if(!b||b>cash)return; cash-=b; 
        if(Math.random()>0.5){cash+=b*2; document.getElementById('casinoMsg').innerText="WIN!"; document.getElementById('casinoMsg').style.color="lime";}
        else{document.getElementById('casinoMsg').innerText="LOSE"; document.getElementById('casinoMsg').style.color="red";} updateUI();}

        updateUI();
    </script>
</body>
</html>
