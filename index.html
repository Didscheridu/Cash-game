<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imperium: CEO Professional</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --bg: #0f172a; --panel: #1e293b; --border: #334155;
            --accent: #0ea5e9; --green: #22c55e; --red: #ef4444; --orange: #f59e0b;
            --text: #f1f5f9;
        }
        * { box-sizing: border-box; user-select: none; scrollbar-width: thin; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

        /* UI LAYOUT */
        .top-bar { height: 60px; background: var(--panel); border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 10; }
        .main-container { display: flex; flex: 1; overflow: hidden; }
        .sidebar { width: 250px; background: var(--panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 20px; gap: 10px; }
        .content { flex: 1; padding: 20px; overflow-y: auto; position: relative; background: radial-gradient(circle at top right, #1e293b 0%, #0f172a 60%); }

        /* COMPONENTS */
        .stat-badge { background: #0f172a; padding: 8px 12px; border-radius: 6px; border: 1px solid var(--border); display: flex; align-items: center; gap: 10px; font-family: monospace; font-size: 1.1em; }
        .btn { border: none; padding: 10px; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.2s; display: flex; align-items: center; justify-content: center; gap: 5px; width: 100%; }
        .btn:active { transform: scale(0.98); }
        .btn-primary { background: var(--accent); color: white; }
        .btn-success { background: var(--green); color: black; }
        .btn-danger { background: rgba(239, 68, 68, 0.2); color: var(--red); border: 1px solid var(--red); }
        .btn-nav { background: transparent; color: #94a3b8; justify-content: flex-start; }
        .btn-nav.active { background: var(--accent); color: white; }
        .btn-nav:hover:not(.active) { background: rgba(255,255,255,0.05); }

        /* DASHBOARD GRID */
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        
        .card { background: rgba(30, 41, 59, 0.7); border: 1px solid var(--border); border-radius: 10px; padding: 20px; backdrop-filter: blur(10px); }
        .card h3 { margin-top: 0; color: var(--accent); display: flex; justify-content: space-between; }
        
        /* PERFORMANCE BARS */
        .perf-container { margin-top: 10px; }
        .perf-label { font-size: 0.8em; color: #94a3b8; display: flex; justify-content: space-between; margin-bottom: 3px; }
        .progress-bg { height: 6px; background: #0f172a; border-radius: 3px; overflow: hidden; }
        .progress-fill { height: 100%; width: 0%; transition: width 0.2s linear; }
        .fill-blue { background: var(--accent); }
        .fill-green { background: var(--green); }
        .fill-orange { background: var(--orange); }
        
        /* LOG CONSOLE */
        .console { height: 150px; background: #000; border: 1px solid var(--border); border-radius: 6px; padding: 10px; font-family: monospace; font-size: 0.85em; overflow-y: auto; color: var(--green); display: flex; flex-direction: column-reverse; }
        .log-item { border-bottom: 1px solid #111; padding: 2px 0; }

        /* CONTRACTS */
        .contract-item { background: var(--bg); border: 1px solid var(--border); padding: 15px; border-radius: 8px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .contract-status { font-size: 0.8em; padding: 2px 6px; border-radius: 4px; background: #333; }
        .status-delivering { color: var(--orange); border: 1px solid var(--orange); animation: pulse 1s infinite; }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        
        /* MODALS */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; display: none; justify-content: center; align-items: center; }
        .modal-box { background: var(--panel); padding: 30px; border-radius: 12px; width: 500px; border: 1px solid var(--accent); }
        
        /* INPUTS */
        input, select { background: var(--bg); border: 1px solid var(--border); color: white; padding: 10px; width: 100%; border-radius: 5px; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div class="top-bar">
        <div style="font-weight:bold; font-size:1.2em; color:var(--accent);"><i class="fas fa-building"></i> CEO PRO v22.0</div>
        <div style="display:flex; gap:15px;">
            <div class="stat-badge"><i class="fas fa-wallet" style="color:var(--green)"></i> <span id="ui-cash">0 €</span></div>
            <div class="stat-badge"><i class="fas fa-star" style="color:var(--orange)"></i> <span id="ui-rep">0</span> Ruf</div>
        </div>
    </div>

    <div class="main-container">
        <div class="sidebar">
            <button class="btn btn-nav active" onclick="setView('dash')"><i class="fas fa-tachometer-alt"></i> Dashboard</button>
            <button class="btn btn-nav" onclick="setView('production')"><i class="fas fa-industry"></i> Produktion & Lager</button>
            <button class="btn btn-nav" onclick="setView('sales')"><i class="fas fa-shipping-fast"></i> Verkauf & Logistik</button>
            <button class="btn btn-nav" onclick="setView('product')"><i class="fas fa-pencil-ruler"></i> Produkt Design</button>
            <div style="flex:1"></div>
            <div class="stat-badge" style="justify-content:center; font-size:0.9em; color:#666;">Tag <span id="ui-day">1</span></div>
        </div>

        <div class="content" id="view-dash">
            
            <div id="setup-screen" style="max-width:400px; margin: 50px auto; text-align:center;">
                <h1 style="color:var(--accent)">Unternehmen gründen</h1>
                <p style="color:#999">Wähle deinen Namen und starte dein Imperium.</p>
                <input id="setup-name" placeholder="Firmenname">
                <button class="btn btn-primary" onclick="Game.startCompany()">Gründen (Startkapital: 50.000€)</button>
            </div>

            <div id="dash-screen" style="display:none;">
                <div class="grid-4">
                    <div class="card">
                        <h3>Einkauf (Mat.)</h3>
                        <div class="perf-container">
                            <div class="perf-label"><span>Bestand</span> <span id="d-raw">0</span></div>
                            <div class="progress-bg"><div id="bar-raw" class="progress-fill fill-blue"></div></div>
                        </div>
                        <div class="perf-container" style="margin-top:10px;">
                            <div class="perf-label"><span>Effizienz</span> <span id="eff-buy">0%</span></div>
                            <div class="progress-bg"><div id="bar-eff-buy" class="progress-fill fill-green"></div></div>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Produktion</h3>
                        <div class="perf-container">
                            <div class="perf-label"><span>Fertigware</span> <span id="d-stock">0</span></div>
                            <div class="progress-bg"><div id="bar-stock" class="progress-fill fill-orange"></div></div>
                        </div>
                        <div class="perf-container" style="margin-top:10px;">
                            <div class="perf-label"><span>Auslastung</span> <span id="eff-make">0%</span></div>
                            <div class="progress-bg"><div id="bar-eff-make" class="progress-fill fill-green"></div></div>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Vertrieb</h3>
                        <div class="perf-container">
                            <div class="perf-label"><span>Verkäufe/Min</span> <span id="d-sales">0</span></div>
                        </div>
                        <div class="perf-container" style="margin-top:10px;">
                            <div class="perf-label"><span>Aktivität</span> <span id="eff-sell">0%</span></div>
                            <div class="progress-bg"><div id="bar-eff-sell" class="progress-fill fill-green"></div></div>
                        </div>
                    </div>
                    <div class="card">
                        <h3>Logistik</h3>
                        <div class="perf-container">
                            <div class="perf-label"><span>In Lieferung</span> <span id="d-ship">0</span></div>
                        </div>
                        <div class="perf-container" style="margin-top:10px;">
                            <div class="perf-label"><span>Tempo</span> <span id="eff-log">0%</span></div>
                            <div class="progress-bg"><div id="bar-eff-log" class="progress-fill fill-green"></div></div>
                        </div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card" style="height:300px;">
                        <h3><i class="fas fa-chart-line"></i> Umsatz (Live)</h3>
                        <canvas id="revenueChart"></canvas>
                    </div>
                    <div class="card" style="height:300px; display:flex; flex-direction:column;">
                        <h3><i class="fas fa-list"></i> Firmen-Log</h3>
                        <div class="console" id="console-log"></div>
                    </div>
                </div>

                <h3 style="margin-top:30px; border-bottom:1px solid #333; padding-bottom:10px;">Aktive Aufträge & Lieferungen</h3>
                <div id="contracts-list">
                    </div>

            </div>
        </div>

        <div class="content" id="view-product" style="display:none;">
            <div class="card" style="max-width:600px; margin:0 auto;">
                <h3>Produkt Entwicklung</h3>
                <label>Produktname</label>
                <input id="prod-name" placeholder="z.B. iPhone X">
                
                <label>Materialien wählen (Beeinflusst Qualität & Kosten)</label>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:10px;">
                    <button class="btn" id="mat-wood" onclick="Product.toggleMat('wood', 5)">Holz (5€)</button>
                    <button class="btn" id="mat-steel" onclick="Product.toggleMat('steel', 20)">Stahl (20€)</button>
                    <button class="btn" id="mat-plastic" onclick="Product.toggleMat('plastic', 10)">Plastik (10€)</button>
                    <button class="btn" id="mat-gold" onclick="Product.toggleMat('gold', 100)">Gold (100€)</button>
                </div>

                <div style="background:#0f172a; padding:15px; border-radius:6px; margin:15px 0;">
                    <div style="display:flex; justify-content:space-between;"><span>Herstellkosten:</span> <span id="calc-cost">0 €</span></div>
                    <div style="display:flex; justify-content:space-between;"><span>Qualität:</span> <span id="calc-qual">0</span></div>
                </div>

                <label>Verkaufspreis festlegen</label>
                <input type="range" id="price-slider" min="10" max="500" value="50" oninput="Product.updatePreview()">
                <p style="text-align:center; font-size:1.2em; font-weight:bold; color:var(--accent)">Verkaufspreis: <span id="calc-price">50</span> €</p>
                <p style="text-align:center; font-size:0.9em; color:#999">Kundenmeinung: <span id="calc-sentiment">--</span></p>

                <button class="btn btn-primary" onclick="Product.save()">Produktion Umstellen</button>
            </div>
        </div>

        <div class="content" id="view-production" style="display:none;">
            <div class="grid-2">
                <div class="card">
                    <h3>Personal: Einkauf</h3>
                    <h1 id="count-buy">0</h1>
                    <div style="display:flex; gap:10px;">
                        <button class="btn btn-success" onclick="Staff.hire('buy')">Einstellen (500€)</button>
                        <button class="btn btn-danger" onclick="Staff.fire('buy')">Feuern</button>
                    </div>
                    <p style="font-size:0.8em; color:#888;">Kauft Rohstoffe automatisch nach.</p>
                </div>
                <div class="card">
                    <h3>Personal: Produktion</h3>
                    <h1 id="count-make">0</h1>
                    <div style="display:flex; gap:10px;">
                        <button class="btn btn-success" onclick="Staff.hire('make')">Einstellen (500€)</button>
                        <button class="btn btn-danger" onclick="Staff.fire('make')">Feuern</button>
                    </div>
                    <p style="font-size:0.8em; color:#888;">Verarbeitet Rohstoffe zu Produkten.</p>
                </div>
            </div>
        </div>

        <div class="content" id="view-sales" style="display:none;">
            <div class="grid-2">
                <div class="card">
                    <h3>Personal: Vertrieb</h3>
                    <h1 id="count-sell">0</h1>
                    <div style="display:flex; gap:10px;">
                        <button class="btn btn-success" onclick="Staff.hire('sell')">Einstellen (500€)</button>
                        <button class="btn btn-danger" onclick="Staff.fire('sell')">Feuern</button>
                    </div>
                    <p style="font-size:0.8em; color:#888;">Findet Kunden und Aufträge.</p>
                </div>
                <div class="card">
                    <h3>Personal: Logistik (NEU)</h3>
                    <h1 id="count-log">0</h1>
                    <div style="display:flex; gap:10px;">
                        <button class="btn btn-success" onclick="Staff.hire('log')">Einstellen (500€)</button>
                        <button class="btn btn-danger" onclick="Staff.fire('log')">Feuern</button>
                    </div>
                    <p style="font-size:0.8em; color:#888;">Liefert Ware aus. Ohne Logistik kein Geld!</p>
                </div>
            </div>
        </div>

    </div>

    <script>
        /* --- GAME ENGINE --- */
        const Game = {
            tick: 0,
            cash: 50000,
            reputation: 0,
            day: 1,
            company: null,
            activeView: 'dash',
            
            // Stats for chart
            revenueHistory: Array(20).fill(0),
            chart: null,

            startCompany: function() {
                const name = document.getElementById('setup-name').value;
                if(!name) return alert("Bitte Namen eingeben!");
                
                this.company = {
                    name: name,
                    product: { name: "Prototyp", cost: 10, price: 25, quality: 1 },
                    
                    // Inventory
                    raw: 0,
                    stock: 0,
                    
                    // Staff
                    staff: { buy: 0, make: 0, sell: 0, log: 0 },
                    
                    // Queues
                    orders: [], // Pending orders waiting for stock
                    shipping: [], // Items currently being delivered
                    
                    // Performance Tracking (0-100)
                    eff: { buy:0, make:0, sell:0, log:0 }
                };

                document.getElementById('setup-screen').style.display = 'none';
                document.getElementById('dash-screen').style.display = 'block';
                this.log(`Firma ${name} gegründet. Viel Erfolg, CEO!`);
                this.updateUI();
                this.initChart();
            },

            // MAIN LOOP (100ms)
            loop: function() {
                if(!this.company) return;
                this.tick++;

                if(this.tick % 50 === 0) this.dailyUpdate(); // Day cycle
                
                this.processPurchasing();
                this.processProduction();
                this.processSales();
                this.processLogistics();
                this.processContracts();

                if(this.tick % 5 === 0) this.updateUI(); // UI Refresh rate slightly lower to save perfs
                if(this.tick % 10 === 0) this.updateChart();
            },

            // 1. Purchasing Logic
            processPurchasing: function() {
                const c = this.company;
                const capacity = c.staff.buy * 50; // Max Raw storage per buyer
                
                // Buying speed
                if(c.staff.buy > 0 && c.raw < capacity) {
                    c.eff.buy = 100; // Working full cap
                    if(this.cash >= c.product.cost && Math.random() < (c.staff.buy * 0.05)) {
                        this.cash -= c.product.cost;
                        c.raw++;
                    }
                } else {
                    c.eff.buy = c.staff.buy > 0 ? 0 : 0; // Idle
                }
            },

            // 2. Production Logic
            processProduction: function() {
                const c = this.company;
                if(c.staff.make > 0 && c.raw > 0) {
                    c.eff.make = 100;
                    // Production Rate
                    let rate = c.staff.make * 0.02;
                    if(Math.random() < rate) {
                        c.raw--;
                        c.stock++;
                    }
                } else {
                    c.eff.make = 0;
                }
            },

            // 3. Sales Logic (Finding Customers)
            processSales: function() {
                const c = this.company;
                if(c.staff.sell > 0) {
                    // Verkäufer finden Kunden -> Erstellen "Orders"
                    // Chance depends on Price/Quality ratio + Reputation
                    let ratio = c.product.price / (c.product.cost * (1 + c.product.quality * 0.2));
                    let chance = (c.staff.sell * 0.03) / ratio; 
                    
                    if(Math.random() < chance) {
                        // Neuer Auftrag (Automatisch)
                        c.orders.push({ 
                            qty: 1, 
                            val: c.product.price, 
                            tick: 0 
                        });
                        c.eff.sell = 100;
                    } else {
                        c.eff.sell = Math.max(0, c.eff.sell - 1); // Decay
                    }
                }
            },

            // 4. Logistics Logic (Shipping)
            processLogistics: function() {
                const c = this.company;
                
                // Phase A: Move from Stock to Shipping (Verpacken)
                // Prüfe offene Orders
                if(c.orders.length > 0 && c.stock > 0 && c.staff.log > 0) {
                    // Logistiker verarbeitet Order
                    if(Math.random() < c.staff.log * 0.1) {
                        let order = c.orders.shift(); // Nimm älteste Order
                        c.stock--;
                        
                        // Add to shipping queue with delivery time
                        c.shipping.push({
                            val: order.val,
                            progress: 0,
                            distance: 20 + Math.random() * 30 // Ticks to deliver
                        });
                        c.eff.log = 100;
                    }
                } else {
                    c.eff.log = Math.max(0, c.eff.log - 1);
                }

                // Phase B: Driving (Ausliefern)
                for(let i = c.shipping.length - 1; i >= 0; i--) {
                    let shipment = c.shipping[i];
                    shipment.progress += (1 + (c.staff.log * 0.1)); // Mehr Mitarbeiter = Schneller
                    
                    if(shipment.progress >= shipment.distance) {
                        // Delivered!
                        this.cash += shipment.val;
                        this.reputation += 0.1;
                        this.log(`Lieferung erfolgreich: +${shipment.val}€`);
                        c.shipping.splice(i, 1);
                    }
                }
            },

            // 5. Contracts (Special Orders)
            processContracts: function() {
                // Generiere selten Großaufträge
                if(this.tick % 200 === 0 && this.company.staff.sell > 0) {
                    let qty = Math.floor(Math.random() * 50) + 10;
                    let price = qty * this.company.product.price * 1.2; // 20% Bonus
                    this.addContract(qty, price);
                }
            },

            addContract: function(qty, val) {
                const id = Date.now();
                const div = document.createElement('div');
                div.className = 'contract-item';
                div.id = 'contract-'+id;
                div.innerHTML = `
                    <div>
                        <strong>Großauftrag</strong><br>
                        ${qty}x ${this.company.product.name}
                    </div>
                    <div style="text-align:right">
                        <div style="color:var(--green)">+${val.toFixed(0)} €</div>
                        <button class="btn btn-primary" style="padding:5px 10px; margin-top:5px;" onclick="Game.acceptContract(${id}, ${qty}, ${val})">Annehmen</button>
                    </div>
                `;
                document.getElementById('contracts-list').prepend(div);
            },

            acceptContract: function(id, qty, val) {
                // Add to special internal queue handled by logistics
                // For simplicity here: Directly insert into orders queue
                for(let i=0; i<qty; i++) {
                    this.company.orders.push({ qty: 1, val: val/qty, tick:0 });
                }
                document.getElementById('contract-'+id).remove();
                this.log(`Großauftrag angenommen: ${qty} Einheiten in Warteschlange.`);
            },

            dailyUpdate: function() {
                this.day++;
                document.getElementById('ui-day').innerText = this.day;
                
                // Pay wages
                const wagePerEmp = 50;
                const totalStaff = this.company.staff.buy + this.company.staff.make + this.company.staff.sell + this.company.staff.log;
                const totalWage = totalStaff * wagePerEmp;
                
                if(totalStaff > 0) {
                    if(this.cash >= totalWage) {
                        this.cash -= totalWage;
                        this.log(`Löhne gezahlt: -${totalWage}€`);
                    } else {
                        this.log("STREIK! Kein Geld für Löhne!", "error");
                        // 50% staff quits
                        this.company.staff.buy = Math.floor(this.company.staff.buy/2);
                        this.company.staff.make = Math.floor(this.company.staff.make/2);
                        this.company.staff.sell = Math.floor(this.company.staff.sell/2);
                        this.company.staff.log = Math.floor(this.company.staff.log/2);
                    }
                }
            },

            log: function(msg, type="info") {
                const el = document.getElementById('console-log');
                const line = document.createElement('div');
                line.className = 'log-item';
                line.innerText = `[Tag ${this.day}] ${msg}`;
                if(type === 'error') line.style.color = 'var(--red)';
                el.prepend(line);
                if(el.children.length > 20) el.lastChild.remove();
            },

            updateUI: function() {
                document.getElementById('ui-cash').innerText = this.cash.toLocaleString() + " €";
                document.getElementById('ui-rep').innerText = Math.floor(this.reputation);
                
                const c = this.company;
                
                // Bars
                document.getElementById('bar-raw').style.width = Math.min(100, (c.raw / (c.staff.buy*50 || 1))*100) + "%";
                document.getElementById('d-raw').innerText = c.raw;
                document.getElementById('bar-eff-buy').style.width = c.eff.buy + "%";

                document.getElementById('bar-stock').style.width = Math.min(100, (c.stock / 100)*100) + "%"; // Visual scale
                document.getElementById('d-stock').innerText = c.stock;
                document.getElementById('bar-eff-make').style.width = c.eff.make + "%";

                document.getElementById('d-sales').innerText = c.eff.sell > 0 ? "Aktiv" : "Warten";
                document.getElementById('bar-eff-sell').style.width = c.eff.sell + "%";

                document.getElementById('d-ship').innerText = c.shipping.length + " Pakete";
                document.getElementById('bar-eff-log').style.width = c.eff.log + "%";

                // Staff Counts UI
                ['buy','make','sell','log'].forEach(role => {
                    let el = document.getElementById('count-'+role);
                    if(el) el.innerText = c.staff[role];
                });
            },

            initChart: function() {
                const ctx = document.getElementById('revenueChart').getContext('2d');
                this.chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: Array(20).fill(''),
                        datasets: [{
                            label: 'Kapital',
                            data: Array(20).fill(this.cash),
                            borderColor: '#0ea5e9',
                            tension: 0.4,
                            pointRadius: 0
                        }]
                    },
                    options: { 
                        responsive: true, 
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: { 
                            x: { display: false }, 
                            y: { grid: { color: '#334155' } } 
                        },
                        animation: false
                    }
                });
            },

            updateChart: function() {
                if(!this.chart) return;
                this.chart.data.datasets[0].data.shift();
                this.chart.data.datasets[0].data.push(this.cash);
                this.chart.update();
            }
        };

        /* --- STAFF MANAGER --- */
        const Staff = {
            hire: function(role) {
                if(Game.cash >= 500) {
                    Game.cash -= 500;
                    Game.company.staff[role]++;
                    Game.log(`Mitarbeiter eingestellt (${role}).`);
                    Game.updateUI();
                } else {
                    alert("Zu wenig Geld!");
                }
            },
            fire: function(role) {
                if(Game.company.staff[role] > 0) {
                    Game.company.staff[role]--;
                    Game.log(`Mitarbeiter entlassen.`);
                    Game.updateUI();
                }
            }
        };

        /* --- PRODUCT DESIGNER --- */
        const Product = {
            mats: [],
            toggleMat: function(id, cost) {
                const btn = document.getElementById('mat-'+id);
                if(this.mats.includes(id)) {
                    this.mats = this.mats.filter(m => m !== id);
                    btn.style.border = "none";
                } else {
                    this.mats.push(id);
                    btn.style.border = "2px solid var(--accent)";
                }
                this.updatePreview();
            },
            updatePreview: function() {
                let cost = 0;
                // Calculate cost based on mats (simplified for demo)
                this.mats.forEach(m => cost += 10); // Placeholder logic
                if(cost === 0) cost = 10; // Base

                let price = document.getElementById('price-slider').value;
                document.getElementById('calc-cost').innerText = cost + " €";
                document.getElementById('calc-price').innerText = price + " €";
                
                let ratio = price / (cost * 1.5);
                let sent = "Neutral";
                if(ratio < 0.8) sent = "Begeistert!";
                else if(ratio > 2) sent = "Wütend (Zu teuer)";
                document.getElementById('calc-sentiment').innerText = sent;
            },
            save: function() {
                const name = document.getElementById('prod-name').value;
                const price = parseInt(document.getElementById('price-slider').value);
                const cost = parseInt(document.getElementById('calc-cost').innerText);
                
                Game.company.product.name = name || "Produkt X";
                Game.company.product.price = price;
                Game.company.product.cost = cost;
                
                Game.log(`Neues Produkt entwickelt: ${name}`);
                setView('dash');
            }
        };

        /* --- NAVIGATION --- */
        function setView(id) {
            document.querySelectorAll('.content').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.btn-nav').forEach(el => el.classList.remove('active'));
            
            document.getElementById('view-' + id).style.display = 'block';
            // Find button roughly
            const btns = document.querySelectorAll('.btn-nav');
            if(id === 'dash') btns[0].classList.add('active');
            if(id === 'production') btns[1].classList.add('active');
            if(id === 'sales') btns[2].classList.add('active');
            if(id === 'product') btns[3].classList.add('active');
        }

        // START
        setInterval(() => Game.loop(), 100);

    </script>
</body>
</html>
